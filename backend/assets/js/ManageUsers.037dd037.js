import{d as h,k as f,j as b,r as l,e as w,w as r,E as n,o as v,a as o,m as g,f as x}from"./index.9e85dc32.js";import{a as c}from"./axios.4d564c32.js";import{u as y}from"./store.76a146f9.js";const F=h({__name:"ManageUsers",setup(k){const i=y(),u=e=>{c.post("/api/admin/users/delete",{user_id:parseInt(t.value[e].user_id),vendor_id:0,role:"users"}).then(a=>{if(console.log(a),a.data.code==200&&a.data.data.success==1)n.confirm("Delete Order Success!").then(()=>{t.value.splice(e,1)}).catch(()=>{t.value.splice(e,1)});else throw new Error("Delete Order Fail!")}).catch(a=>{console.log(a),n.confirm("Delete Order Fail!")})},d=()=>{c.post("/api/admin/users",{}).then(e=>{if(e.data.code==200&&e.data.data.success==1)for(let a=0;a<e.data.data.users.length;a++)t.value.push({user_id:e.data.data.users[a].user_id,user_display_name:e.data.data.users[a].user_display_name,balance:e.data.data.users[a].balance});else throw new Error("Get Products Fail!")}).catch(e=>{console.log(e),n.confirm("Get Products Fail!").then(()=>{location.reload()}).catch(()=>{location.reload()})})},t=f([]);return b(()=>{i.vendor_id==0?setTimeout(()=>{d()},250):d()}),(e,a)=>{const s=l("el-table-column"),_=l("el-button"),m=l("el-table");return v(),w(m,{data:t.value,style:{width:"100%",height:"100%"}},{default:r(()=>[o(s,{fixed:"",prop:"user_id",label:"User ID",width:"100"}),o(s,{prop:"user_display_name",label:"Display Name",width:"150"}),o(s,{prop:"balance",label:"Balance",width:"100"}),o(s,{fixed:"right",label:"Operation",width:"150"},{default:r(p=>[o(_,{link:"",type:"primary",size:"small",onClick:g(D=>u(p.$index),["prevent"])},{default:r(()=>[x(" Remove ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])}}});export{F as default};
