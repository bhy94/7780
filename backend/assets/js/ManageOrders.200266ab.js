import{d as h,k as b,j as f,r as l,e as w,w as s,E as i,o as v,a as o,m as x,f as g}from"./index.9e85dc32.js";import{a as c}from"./axios.4d564c32.js";import{u as y}from"./store.76a146f9.js";const I=h({__name:"ManageOrders",setup(D){const d=y(),_=e=>{c.post("/api/vendors/orders/delete",{vendor_id:parseInt(d.vendor_id),order_id:r.value[e].order_id}).then(t=>{if(console.log(t),t.data.code==200&&t.data.data.success==1)i.confirm("Delete Order Success!").then(()=>{r.value.splice(e,1)}).catch(()=>{r.value.splice(e,1)});else throw new Error("Delete Order Fail!")}).catch(t=>{console.log(t),i.confirm("Delete Order Fail!")})},n=()=>{c.post("/api/vendors/orders",{vendor_id:parseInt(d.vendor_id)}).then(e=>{if(e.data.code==200&&e.data.data.success==1)for(let t=0;t<e.data.data.orders.length;t++){let a="false";e.data.data.orders[t].parent_order_id!=e.data.data.orders[t].order_id&&(a="true"),r.value.push({order_id:e.data.data.orders[t].order_id,user_id:e.data.data.orders[t].user_id,product_id:e.data.data.orders[t].product_id,sub_order:a,quantity:e.data.data.orders[t].quantity,total_price:e.data.data.orders[t].total_price,place_time:e.data.data.orders[t].place_time,status:e.data.data.orders[t].status,express_number:e.data.data.orders[t].express_number})}else throw new Error("Get Products Fail!")}).catch(e=>{console.log(e),i.confirm("Get Products Fail!").then(()=>{location.reload()}).catch(()=>{location.reload()})})},r=b([]);return f(()=>{d.vendor_id==0?setTimeout(()=>{n()},250):n()}),(e,t)=>{const a=l("el-table-column"),u=l("el-button"),p=l("el-table");return v(),w(p,{data:r.value,style:{width:"100%",height:"100%"}},{default:s(()=>[o(a,{fixed:"",prop:"order_id",label:"Order ID",width:"100"}),o(a,{prop:"user_id",label:"User ID",width:"100"}),o(a,{prop:"product_id",label:"Product ID",width:"100"}),o(a,{prop:"sub_order",label:"SubOrder",width:"120"}),o(a,{prop:"quantity",label:"Quantity",width:"120"}),o(a,{prop:"total_price",label:"Volume",width:"120"}),o(a,{prop:"place_time",label:"Time",width:"120"}),o(a,{prop:"status",label:"Status",width:"100"}),o(a,{prop:"express_number",label:"Express Number",width:"150"}),o(a,{fixed:"right",label:"Operation",width:"150"},{default:s(m=>[o(u,{link:"",type:"primary",size:"small",onClick:x(O=>_(m.$index),["prevent"])},{default:s(()=>[g(" Remove ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])}}});export{I as default};
