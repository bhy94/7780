import{d as h,k as f,j as v,r,e as w,w as l,E as s,o as b,a as o,m as g,f as P}from"./index.36428d0e.js";import{a as i}from"./axios.4d564c32.js";import{u as x}from"./store.ef743312.js";const M=h({__name:"ManageProducts",setup(k){const c=x(),u=t=>{i.post("/api/vendors/products/delete",{vendor_id:parseInt(c.vendor_id),product_id:d.value[t].product_id}).then(e=>{if(e.data.code==200&&e.data.data.success==1)s.confirm("Delete Product Success!").then(()=>{d.value.splice(t,1)}).catch(()=>{d.value.splice(t,1)});else throw new Error("Delete Product Fail!")}).catch(e=>{console.log(e),s.confirm("Delete Product Fail!")})},d=f([]),n=()=>{i.post("/api/vendors/products",{vendor_id:parseInt(c.vendor_id)}).then(t=>{if(t.data.code==200&&t.data.data.success==1)for(let e=0;e<t.data.data.products.length;e++)d.value.push({product_id:t.data.data.products[e].product_id,product_name:t.data.data.products[e].product_name,product_cover:t.data.data.products[e].product_cover,product_info:t.data.data.products[e].product_info,price:t.data.data.products[e].price,score:t.data.data.products[e].product_score,tags:t.data.data.products[e].tags});else throw new Error("Get Products Fail!")}).catch(t=>{console.log(t),s.confirm("Get Products Fail!").then(()=>{location.reload()}).catch(()=>{location.reload()})})};return v(()=>{c.vendor_id==0?setTimeout(()=>{n()},250):n()}),(t,e)=>{const a=r("el-table-column"),p=r("el-button"),_=r("el-table");return b(),w(_,{data:d.value,style:{width:"100%"},"min-height":"250"},{default:l(()=>[o(a,{fixed:"",prop:"product_name",label:"Product Name",width:"150"}),o(a,{prop:"product_cover",label:"Product Cover",width:"150"}),o(a,{prop:"product_info",label:"Product Info",width:"120"}),o(a,{prop:"price",label:"Price",width:"120"}),o(a,{prop:"score",label:"Score",width:"120"}),o(a,{prop:"tags",label:"Tags",width:"120"}),o(a,{fixed:"right",label:"Operations",width:"120"},{default:l(m=>[o(p,{link:"",type:"primary",size:"small",onClick:g(C=>u(m.$index),["prevent"])},{default:l(()=>[P(" Remove ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])}}});export{M as default};
